(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{274:function(e,s,n){"use strict";var i=n(30);n.n(i).a},275:function(e,s,n){(e.exports=n(0)(!1)).push([e.i,"ul[data-v-1f30747e]{list-style:none}ul ul[data-v-1f30747e]{padding-left:16px}.locked>label[data-v-1f30747e]{opacity:.5}",""])},277:function(e,s,n){"use strict";n.r(s);var i,t=[function(){var e=this.$createElement,s=this._self._c||e;return s("p",[s("img",{staticClass:"inline-block w-16 mr-4",staticStyle:{"vertical-align":"-20px"},attrs:{src:n(29)}}),this._v(" Or here\n  ")])}];!function(e){e.Owner="OWNER",e.ManageAccess="MANAGE_ACCESS",e.EditConfig="EDIT_CONFIG",e.ReadConfig="READ_CONFIG",e.ViewGuild="VIEW_GUILD"}(i||(i={}));Object.entries(i).reduce((e,[s,n])=>(e[n]=s,e),{});const r={[i.Owner]:"Server owner",[i.ManageAccess]:"Manage dashboard access",[i.EditConfig]:"Edit config",[i.ReadConfig]:"Read config",[i.ViewGuild]:"View server"},a=[[i.Owner,[[i.ManageAccess,[[i.EditConfig,[[i.ReadConfig,[i.ViewGuild]]]]]]]]];function o(e,s){return!!e.has(s)||!!function e(s,n,i){for(const t of s){const[s,r]=Array.isArray(t)?t:[t];if(n.has(s)){if(r&&d(r,i))return!0}else if(r&&e(r,n,i))return!0}return!1}(a,e,s)}function d(e,s){for(const n of e){const[e,i]=Array.isArray(n)?n:[n];if(e===s)return!0;if(i&&d(i,s))return!0}return!1}var c={name:"permission-tree",props:{tree:Array,grantedPermissions:Set,onChange:Function},data:()=>({permissionNames:r}),methods:{togglePermission(e){this.grantedPermissions.has(e)?this.grantedPermissions.delete(e):this.grantedPermissions.add(e),this.onChange&&this.onChange()}}},u=(n(274),n(8)),l=Object(u.a)(c,(function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("ul",{staticClass:"nostyles"},e._l(e.tree,(function(s){var i=s[0],t=s[1],r=s[2];return n("li",{class:{locked:t.locked}},[n("label",[n("input",{attrs:{type:"checkbox",disabled:t.locked||t.redundant},domProps:{checked:e.grantedPermissions.has(i)||t.redundant},on:{input:function(s){return e.togglePermission(i)}}}),e._v(" "),n("span",[e._v(e._s(e.permissionNames[i]))])]),e._v(" "),r&&r.length?n("permission-tree",{attrs:{tree:r,"granted-permissions":e.grantedPermissions,"on-change":e.onChange}}):e._e()],1)})),0)}),[],!1,null,"1f30747e",null).exports;function g(e,s,n=new Set,i=!1){const t=[];for(const r of e){const[e,a]=Array.isArray(r)?r:[r],d=[e,{locked:!o(n,e),redundant:i}];if(a){const t=i||s.has(e);d.push(g(a,s,n,t))}t.push(d)}return t}var p=n(16),m={components:{PermissionTree:l},data:()=>({managerPermissions:new Set([i.ManageAccess])}),computed:{...Object(p.b)("guilds",{canManage(e){var s;return null===(s=e.myPermissions[this.$route.params.guildId])||void 0===s?void 0:s[i.ManageAccess]},permissionAssignments(e){return(e.guildPermissionAssignments[this.$route.params.guildId]||[]).map(e=>({...e,_permissionTree:g(a,e.permissions,this.managerPermissions)}))}})},async mounted(){await this.$store.dispatch("guilds/checkPermission",{guildId:this.$route.params.guildId,permission:i.ManageAccess}),this.canManage?await this.$store.dispatch("guilds/loadGuildPermissionAssignments",this.$route.params.guildId):this.$router.push("/dashboard")},methods:{onTreeUpdate(e){this.$store.dispatch("guilds/setTargetPermissions",{guildId:this.$route.params.guildId,targetId:e.target_id,type:e.type,permissions:e.permissions})}}},h=Object(u.a)(m,(function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("div",[n("h1",[e._v("Guild Access")]),e._v(" "),e._m(0),e._v(" "),e._l(e.permissionAssignments,(function(s){return n("div",[n("strong",[e._v(e._s(s.type)+" "+e._s(s.target_id))]),e._v(" "),n("permission-tree",{attrs:{tree:s._permissionTree,"granted-permissions":s.permissions,"on-change":e.onTreeUpdate.bind(null,s)}})],1)}))],2)}),t,!1,null,null,null);s.default=h.exports},29:function(e,s,n){e.exports=n.p+"squint-94de12e8bd18a944a49ea86079f72b42.png"},30:function(e,s,n){var i=n(275);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n(1).default)("e0f9b1b0",i,!0,{})}}]);
//# sourceMappingURL=11.6c3f32137192f26bcd0f.js.map